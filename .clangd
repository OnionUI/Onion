
CompileFlags:
  Add:
    # Language / standard
    - -x
    - c
    - -std=gnu99

    # Target (prevents size / builtin / ABI noise)
    - -target
    - arm-none-eabi

    # Common OnionOS / embedded defines
    - -D__linux__
    - -D_GNU_SOURCE
    - -D__ARM_ARCH=7
    - -D__ARM_EABI__
    - -D__embedded__

    # Fake linker-provided symbols (inline, no header file)
    - -D_end=0
    - -D_edata=0
    - -D_sbss=0
    - -D_ebss=0
    - -D_heap_start=0
    - -D_heap_end=0

    # Donâ€™t try to be the linker
    - -fno-builtin
    - -fno-lto

    # Silence common false positives
    - -Wno-everything

  Remove:
    - -Werror

Diagnostics:
  Suppress:
    - undefined_var_use
    - undeclared_var_use
    - unknown_typename
    - incompatible-pointer-types
    - missing_prototypes
    - missing_variable_declarations
    - strict_prototypes
    - implicit_function_declaration
